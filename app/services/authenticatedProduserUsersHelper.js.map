{"version":3,"file":"authenticatedProduserUsersHelper.js","sourceRoot":"","sources":["authenticatedProduserUsersHelper.ts"],"names":[],"mappings":";AAAA;IACI,yBAAmB,IAAS,EAAS,SAAiB,EAAS,UAAgB;QAA5D,SAAI,GAAJ,IAAI,CAAK;QAAS,cAAS,GAAT,SAAS,CAAQ;QAAS,eAAU,GAAV,UAAU,CAAM;IAAI,CAAC;IAExF,sBAAC;AAAD,CAAC,AAHD,IAGC;AAHY,uBAAe,kBAG3B,CAAA;AACD;IAAA;IAiCA,CAAC;IA5BiB,wCAAO,GAArB,UAAsB,IAAS,EAAE,KAAK;QAClC,IAAI,mBAAmB,GAAG,IAAI,IAAI,EAAE,CAAC;QACrC,mBAAmB,CAAC,UAAU,CAAC,mBAAmB,CAAC,UAAU,EAAE,GAAG,gCAAgC,CAAC,YAAY,CAAC,CAAC;QACjH,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,IAAI,eAAe,CAAC,IAAI,EAAE,KAAK,EAAE,mBAAmB,CAAC,CAAC;IACtF,CAAC;IAEa,2CAAU,GAAxB,UAAyB,QAAgB;QACrC,OAAO,gCAAgC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;IAC5D,CAAC;IAEa,6CAAY,GAA1B,UAA2B,QAAQ;QAC/B,MAAM,CAAC,gCAAgC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;IAC5D,CAAC;IAEa,mDAAkB,GAAhC;QACI,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,gCAAgC,CAAC,KAAK,CAAC,CAAC;QAC/D,IAAI,YAAY,GAAa,EAAE,CAAC;QAChC,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;QACnB,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YACzC,EAAE,CAAC,CAAC,gCAAgC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,UAAU,GAAG,GAAG,CAAC,CAAC,CAAC;gBACrE,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;YACjC,CAAC;QACL,CAAC;QACD,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,YAAY,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YACjD,OAAO,gCAAgC,CAAC,KAAK,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC;QACrE,CAAC;IAEL,CAAC;IA/Bc,sCAAK,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAC7B,6CAAY,GAAG,EAAE,CAAC;IA+BpC,uCAAC;AAAD,CAAC,AAjCD,IAiCC;AAjCY,wCAAgC,mCAiC5C,CAAA","sourcesContent":["export class ActiveUserEntry {\r\n    constructor(public user: any, public userToken: string, public logoutTime: Date) { }\r\n\r\n}\r\nexport class AuthenticatedProduserUsersHelper {\r\n    private static users = Object.create(null);\r\n    public static tokenTimeout = 20;\r\n\r\n\r\n    public static addUser(user: any, token) {\r\n        var timeoutMinutesLater = new Date();\r\n        timeoutMinutesLater.setMinutes(timeoutMinutesLater.getMinutes() + AuthenticatedProduserUsersHelper.tokenTimeout);\r\n        this.users[user.username] = new ActiveUserEntry(user, token, timeoutMinutesLater);\r\n    }\r\n\r\n    public static removeUser(userName: string) {\r\n        delete AuthenticatedProduserUsersHelper.users[userName];\r\n    }\r\n\r\n    public static getUserEntry(userName): ActiveUserEntry {\r\n        return AuthenticatedProduserUsersHelper.users[userName];\r\n    }\r\n\r\n    public static updateActiveTokens() {\r\n        var keys = Object.keys(AuthenticatedProduserUsersHelper.users);\r\n        var keysToRemove: string[] = [];\r\n        var now = Date.now;\r\n        for (var ind = 0; ind < keys.length; ind++) {\r\n            if (AuthenticatedProduserUsersHelper.users[keys[ind]].logoutTime < now) {\r\n                keysToRemove.push(keys[ind]);\r\n            }\r\n        }\r\n        for (var ind = 0; ind < keysToRemove.length; ind++) {\r\n            delete AuthenticatedProduserUsersHelper.users[keysToRemove[ind]];\r\n        }\r\n\r\n    }\r\n}\r\n"]}